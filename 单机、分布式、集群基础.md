# 单机结构

## 定义

系统业务量小，将所有代码放在一个项目中，将这个项目部署在一台服务器上。（整个系统所有的服务都有这台唯一的服务器提供）

## 缺点

处理能力有限，业务量增长到一定程度，单机的硬件资源无法满足需求。

# 集群和分布式

## 共同点

集群、分布式都是为了解决两个问题：

* **高吞吐量**
* **高可用**
# **集群**

## 定义

简单来说，就是复制几个单机，就构成了一个“集群”；

集群中每台服务器就叫做这个集群的一个“节点”，所有节点构成了一个集群，**每个节点提供相同的服务**，这样系统的处理能力随节点个数成倍增加（**高吞吐量**）；万一有个节点瘫痪，也不至于整个系统瘫痪（**高可用性**）

## 优点

扩展十分容易，随着系统业务发展，只需要给集群增加节点就可以提升整个系统的处理能力。

## 缺点

当业务发展到一定程度，发现增加节点也无法显著提升系统业务处理能力。

## 扩展

**负载均衡服务器**

“调度者”——根据当前所有节点的负载情况，将用户请求**合理**分配给各个节点

# 分布式

单机结构到集群结构，代码层面基本不变，唯一变动的就是多部署几台服务器，每个服务器运行相同的代码，也就是说，集群中的每个节点都完成相同的工作。

## 定义

将一个完整的系统,按照业务功能，拆分成一个个独立的子系统，部署在不同的服务器上；

在分布式结构中，每个子系统都被称为”服务“。这些子系统能够独立运行在web容器中，它们之间通过[RPC](https://www.jianshu.com/p/7d6853140e13)方式通信。

比如用户信息查询和订单信息查询都是频繁业务操作，分成两个模块，放在不同的机子上运行，效率高于单机部署（**高吞吐量**）；某个功能出现问题，不会影响功能，最多就是依赖功能

## 优点

* 系统耦合度降低，可以**独立开发、独立部署、独立测试**；
* 系统之间**边界明确，排错容易**，提高开发效率；
* **易于扩展某些服务**；（购物商城大促，订单量大大提高，可以针对性的提升订单系统、产品系统的节点数量，而后台管理系统、数据分析系统节点数量维持原有水平即可）
* **服务复用性更高**；（将用户系统作为单独的服务后，公司所有产品都可以使用该服务，无需重复开发）
## 缺点

* 架构设计复杂
* 部署复杂
* 管理服务困难
* 运维复杂度高




